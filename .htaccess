AddDefaultCharset UTF-8
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Set the base directory for rewrites
    RewriteBase /
    
    # Deny access to sensitive directories
    RedirectMatch 403 ^/web2/final_project/car_rental/(app|scheme|console|runtime)/
    
    # Deny access to sensitive files
    <FilesMatch "\.(env|json|xml|log|md|lock|git|ini|bak|sql)$">
        Order allow,deny
        Deny from all
    </FilesMatch>
    
    # Rewrite all requests to index.php (send PATH_INFO without causing internal redirects)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    # Don't rewrite requests that already target index.php to avoid loops
    RewriteCond %{REQUEST_URI} !^/index\.php
    # Main rewrite: send everything except real files/dirs to index.php
    RewriteRule ^ index.php [QSA,L]
    
    # Prevent directory browsing
    Options -Indexes
</IfModule>
